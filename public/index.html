<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Forum Feed</title>

    <link rel="stylesheet" href="styles/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- ✅ Plyr -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.min.js"></script>
    <script src="https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js"></script>
    <script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
    <script src="https://unpkg.com/filepond-plugin-media-preview/dist/filepond-plugin-media-preview.js"></script>
    <script src="https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js"></script>
    <script src="https://unpkg.com/filepond/dist/filepond.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tributejs@5.1.3/dist/tribute.css"
    />
    <link
      href="https://unpkg.com/filepond/dist/filepond.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/filepond-plugin-media-preview/dist/filepond-plugin-media-preview.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsrender/jsrender.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.2/dist/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tributejs@5.1.3/dist/tribute.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>

  <body

    x-data="{
    showNotifications: false,
    showSettings: false,
    openSettings:false,

   
}"
    class="max-w-[700px] bg-[#f1f1f1] flex flex-col items-center justify-center m-auto p-6 max-[768px]:p-2"
  >
    <div class="relative">
      <button
        @click="showNotifications = !showNotifications"
        class="p-2 bg-white rounded-full shadow-md hover:bg-gray-100 focus:outline-none"
      >
        <i class="fa-solid fa-bell text-gray-600"></i>
      </button>
      <div
        x-data="{
      hasUnread: false,
      init() {
        this.checkUnread();
        this.$watch('hasUnread', value => {
        });

        setInterval(() => {
          this.checkUnread();
        }, 1000);
      },
      checkUnread() {
        const container = document.getElementById('notificationContainerSocket');
        this.hasUnread = container && container.querySelector('.unread') !== null;
      }
    }"
        x-show="hasUnread"
        x-cloak
        class="absolute top-0 right-0 -mt-1 -mr-1"
      >
        <span class="relative flex size-2">
          <span
            class="absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"
          ></span>
          <span
            class="relative inline-flex size-2 rounded-full bg-red-500"
          ></span>
        </span>
      </div>

      <!-- Notification Panel -->
      <div
        x-show="showNotifications"
        @click.outside="showNotifications = false"
        x-transition
        class="absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg z-50 p-4"
      >
        <div class="flex items-center justify-between mb-3">
          <h3 class="font-semibold text-lg">Notifications</h3>
          <div class="flex items-center gap-3 text-gray-500">
            <button
              @click="openSettings=true;showNotifications=false"
              x-tooltip="'Settings'"
              class="hover:text-[var(--primary)]"
            >
              <i class="fa-solid fa-gear"></i>
            </button>
            <button
              @click="showNotifications = false"
              x-tooltip="'Close'"
              class="hover:text-red-500"
            >
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>
        </div>

        <div class="flex items-center justify-between mb-3">
          <button
            id="markAllNotificationAsRead"
            x-tooltip="'Mark all as read'"
            class="text-[var(--primary)] hover:text-blue-800"
          >
            <i class="fa-solid fa-envelope-open"></i>
          </button>
          <div
            x-data="{ toggle: false }"
            x-init="$watch('toggle', value => {
                const hideEls = document.querySelectorAll('.read');
                const unreadEls = document.querySelectorAll('.unread');
                const noNotif = document.getElementById('noNotification');
                const mainNotificationContainer = document.getElementById('notificationContainerSocket');

                hideEls.forEach(el => el.classList.toggle('hidden', value));

                if (value && unreadEls.length === 0 && noNotif) {
                  noNotif.classList.remove('hidden');
                  mainNotificationContainer.classList.add('hidden');
                } else if (noNotif) {
                  mainNotificationContainer.classList.remove('hidden');
                  noNotif.classList.add('hidden');
                }
            })"
          >
            <label
              class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer"
            >
              <div
                class="relative h-4 w-8 rounded-full transition duration-200 ease-linear"
                :class="toggle ? 'bg-[var(--primary)]' : 'bg-gray-400'"
              >
                <div
                  class="absolute left-0 h-4 w-4 transform rounded-full border-2 bg-white transition duration-100 ease-linear"
                  :class="toggle ? 'translate-x-full border-[var(--primary)]' : 'translate-x-0 border-gray-400'"
                ></div>
                <input
                  type="checkbox"
                  class="absolute h-full w-full opacity-0 cursor-pointer"
                  @click="toggle = !toggle"
                />
              </div>
              Show unread only
            </label>
          </div>
        </div>
        <div>
          <div
            id="notificationContainerSocket"
            class="flex flex-col gap-2 max-h-[350px] min-h-[100px] h-auto overflow-y-auto"
          ></div>
          <div class="text-gray-500 text-sm p-4 hidden" id="noNotification">
            No notifications
          </div>
        </div>

        <script id="notificationTemplate" type="text/x-jsrender">
          <div class="notification {{if Is_Read}}read{{else}}unread{{/if}} cursor-pointer flex items-start gap-3 rounded-lg p-3 hover:bg-gray-100" data-announcement="{{:ID}}">
            <i class="fa-solid fa-file-alt mt-1 text-lg text-indigo-500"></i>
            <div class="flex-1">
              <div class="text-md font-medium text-gray-900">{{:Title}}</div>
              <div class="text-sm line-clamp-1 font-medium text-gray-900">{{:Parent_Forum?.copy}}</div>
              <div class="text-xs text-gray-500">{{:~formatDate(Parent_Forum?.published_date)}}</div>
            </div>
          </div>
        </script>

        <div class="mt-2 flex justify-end">
          <button
            x-tooltip="'View all'"
            class="text-[var(--primary)] hover:text-blue-800"
          >
            <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Settings Panel -->
      <div
       id="notification-Settings" 
        x-show="openSettings"
        x-transition
        class="absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg z-50 p-4"
      >
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-semibold text-lg">Notification Preferences</h3>
          <button
            @click="openSettings=false"
            x-tooltip="'Close'"
            class="hover:text-red-500 text-gray-500"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="space-y-3 text-sm text-gray-800">
          <div class="space-y-3 text-sm text-gray-800" id="notificationOptionsContainer">
            </div>
            <div class="pt-4 text-right" id="updatePreferenceButton">
              <button onclick="updateNotificationPreferences()"
                class="px-4 py-2 bg-[var(--primary)] text-white rounded hover:opacity-90 transition">
                Save Preferences
              </button>
            </div>
        </div>
      </div>
    </div>

    <div x-data="{modalToSelectUser: true}">
      <button
        @click="switchUser=true; modalToSelectUser=true"
        class="my-8 block"
      >
        Switch User
      </button>
      <div
        x-cloak
        x-show="modalToSelectUser"
        x-transition.opacity.duration.200ms
        x-trap.inert.noscroll="modalToSelectUser"
        class="fixed inset-0 z-30 flex items-end justify-center bg-black/20 p-4 pb-8 backdrop-blur-md sm:items-center lg:p-8"
        role="dialog"
        aria-modal="true"
        aria-labelledby="defaultModalTitle"
      >
        <!-- Modal Dialog -->
        <div
          x-show="modalToSelectUser"
          x-transition:enter="transition ease-out duration-200 delay-100 motion-reduce:transition-opacity"
          x-transition:enter-start="opacity-0 scale-50"
          x-transition:enter-end="opacity-100 scale-100"
          class="flex max-w-lg flex-col gap-4 overflow-hidden rounded-radius bg-white rounded"
        >
          <!-- Dialog Header -->
          <div
            class="flex items-center justify-between bg-surface-alt/60 p-4 dark:bg-surface-dark/20"
          >
            <h3
              id="defaultModalTitle"
              class="font-semibold tracking-wide text-on-surface-strong dark:text-on-surface-dark-strong"
            >
              Select Profile
            </h3>
          </div>
          <!-- Dialog Body -->
          <div class="px-4 pb-4" x-data="{activeUserTab: 'subscribers'}">
            <div class="flex gap-4 mb-4">
              <button
                :class="{'font-bold': activeUserTab==='subscribers'}"
                @click="activeUserTab='subscribers'"
              >
                Subscribers
              </button>
              <button
                :class="{'font-bold': activeUserTab==='admins'}"
                @click="activeUserTab='admins'"
              >
                Admins
              </button>
            </div>
            <div
              id="subscriberContacts"
              x-show="activeUserTab==='subscribers'"
              class="flex h-[100px] items-center justify-center"
            >
              <div class="flex w-12">
                <div class="relative">
                  <div
                    class="w-12 h-12 rounded-full absolute border border-solid border-gray-200"
                  ></div>
                  <div
                    class="w-12 h-12 rounded-full animate-spin absolute border border-solid border-yellow-500 border-t-transparent"
                  ></div>
                </div>
              </div>
            </div>
            <div
              id="adminContacts"
              x-show="activeUserTab==='admins'"
              class="flex h-[100px] items-center justify-center"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <div id="topOfForum"></div>

    <div
      onclick="document.getElementById('topOfForum').scrollIntoView({ behavior: 'smooth' })"
      class="p-3 bg-[var(--primary)] flex items-center justify-center cursor-pointer fixed bottom-[1rem] right-[1rem] max-[768px]:hidden z-[99]"
    >
      <i class="fa-solid fa-arrow-up text-white"></i>
    </div>

<div
  class="inline-flex flex-col items-start justify-center gap-3 self-stretch overflow-hidden rounded bg-white p-4 cursor-pointer"
  id="create-post-trigger">
  <div class="inline-flex items-center justify-start gap-2 self-stretch">
   
      <div class="relative h-8 w-8 overflow-hidden rounded-full border-[2px] border-solid border-[var(--neutral)]">
        <img id="current-user-avatar"
          src="https://files.ontraport.com/media/b0456fe87439430680b173369cc54cea.php03bzcx?Expires=4895186056&Signature=fw-mkSjms67rj5eIsiDF9QfHb4EAe29jfz~yn3XT0--8jLdK4OGkxWBZR9YHSh26ZAp5EHj~6g5CUUncgjztHHKU9c9ymvZYfSbPO9JGht~ZJnr2Gwmp6vsvIpYvE1pEywTeoigeyClFm1dHrS7VakQk9uYac4Sw0suU4MpRGYQPFB6w3HUw-eO5TvaOLabtuSlgdyGRie6Ve0R7kzU76uXDvlhhWGMZ7alNCTdS7txSgUOT8oL9pJP832UsasK4~M~Na0ku1oY-8a7GcvvVv6j7yE0V0COB9OP0FbC8z7eSdZ8r7avFK~f9Wl0SEfS6MkPQR2YwWjr55bbJJhZnZA__&Key-Pair-Id=APKAJVAAMVW6XQYWSTNA"
          alt="avatar" class="w-8 h-8 rounded-full ml-auto" />
      </div>

    <div class="flex flex-1 items-center justify-start gap-2 rounded-xl bg-zinc-100 px-3 py-2">
      <div class="justify-start text-center p2 text-black">What’s on
        your mind <span id="current-user-name"></span> ?</div>
    </div>
  </div>
  <div class="h-0 self-stretch outline-1 outline-offset-[-0.50px] outline-zinc-300"></div>
  <div class="inline-flex items-center justify-start gap-4 self-stretch">
    <div class="flex items-center justify-center gap-2 rounded bg-zinc-100 px-3 py-2 cursor-pointer">
      <div data-property-1="filled" class="relative h-4 w-4 overflow-hidden">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M8.24406 9.66666C9.64138 9.66666 10.7738 8.54761 10.7738 7.16666V3.83333C10.7738 2.45238 9.64138 1.33333 8.24406 1.33333C6.84674 1.33333 5.7143 2.45238 5.7143 3.83333V7.16666C5.7143 8.54761 6.84674 9.66666 8.24406 9.66666ZM13.1548 7.1369C13.1548 7.07142 13.1012 7.01785 13.0357 7.01785H12.1429C12.0774 7.01785 12.0238 7.07142 12.0238 7.1369C12.0238 9.2247 10.3319 10.9167 8.24406 10.9167C6.15626 10.9167 4.4643 9.2247 4.4643 7.1369C4.4643 7.07142 4.41072 7.01785 4.34525 7.01785H3.45239C3.38691 7.01785 3.33334 7.07142 3.33334 7.1369C3.33334 9.64732 5.21727 11.7187 7.64882 12.0119V13.5357H5.48662C5.28275 13.5357 5.11906 13.7485 5.11906 14.0119V14.5476C5.11906 14.6131 5.16072 14.6667 5.21132 14.6667H11.2768C11.3274 14.6667 11.3691 14.6131 11.3691 14.5476V14.0119C11.3691 13.7485 11.2054 13.5357 11.0015 13.5357H8.77977V12.0193C11.2396 11.7515 13.1548 9.66815 13.1548 7.1369Z"
            fill="#0E0E0E" />
        </svg>

      </div>
      <div class="justify-start text-center p3">Start
        Recording</div>
    </div>
    <div class="flex items-center justify-center gap-2 rounded bg-zinc-100 px-3 py-2 cursor-pointer">
      <div class="relative h-4 w-4 overflow-hidden">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M14.6665 9.66683V14.1111C14.6665 14.2585 14.6079 14.3998 14.5037 14.5039C14.3996 14.6081 14.2583 14.6667 14.1109 14.6667H1.88909C1.74176 14.6667 1.60045 14.6081 1.49627 14.5039C1.39209 14.3998 1.33356 14.2585 1.33356 14.1111V9.66683C1.33356 9.51949 1.39209 9.37818 1.49627 9.274C1.60045 9.16982 1.74176 9.11129 1.88909 9.11129C2.03643 9.11129 2.17774 9.16982 2.28192 9.274C2.3861 9.37818 2.44463 9.51949 2.44463 9.66683V13.5556H13.5554V9.66683C13.5554 9.51949 13.6139 9.37818 13.7181 9.274C13.8223 9.16982 13.9636 9.11129 14.1109 9.11129C14.2583 9.11129 14.3996 9.16982 14.5037 9.274C14.6079 9.37818 14.6665 9.51949 14.6665 9.66683ZM5.61536 5.06003L7.44447 3.23023V9.66683C7.44447 9.81416 7.503 9.95547 7.60718 10.0597C7.71136 10.1638 7.85267 10.2224 8.00001 10.2224C8.14734 10.2224 8.28865 10.1638 8.39283 10.0597C8.49701 9.95547 8.55554 9.81416 8.55554 9.66683V3.23023L10.3846 5.06003C10.4889 5.16427 10.6303 5.22284 10.7777 5.22284C10.9251 5.22284 11.0665 5.16427 11.1707 5.06003C11.275 4.95579 11.3335 4.81441 11.3335 4.66699C11.3335 4.51957 11.275 4.37819 11.1707 4.27395L8.39305 1.49626C8.34145 1.44461 8.28018 1.40363 8.21274 1.37568C8.1453 1.34772 8.07301 1.33333 8.00001 1.33333C7.927 1.33333 7.85471 1.34772 7.78727 1.37568C7.71983 1.40363 7.65856 1.44461 7.60696 1.49626L4.82928 4.27395C4.72503 4.37819 4.66647 4.51957 4.66647 4.66699C4.66647 4.81441 4.72503 4.95579 4.82928 5.06003C4.93352 5.16427 5.0749 5.22284 5.22232 5.22284C5.36974 5.22284 5.51112 5.16427 5.61536 5.06003Z"
            fill="#0E0E0E" />
        </svg>

      </div>
      <div class="justify-start text-center p3">Upload File
      </div>
    </div>
  </div>
</div>
<div x-data="{ selectedFilterTab: 'allPosts' }" class="w-full mt-2">
  <div x-on:keydown.right.prevent="$focus.wrap().next()" x-on:keydown.left.prevent="$focus.wrap().previous()"
    class="flex gap-2 overflow-x-auto" role="tablist" aria-label="tab options">
    <div x-on:click="selectedFilterTab = 'allPosts'" data-filter="Recent"
      x-bind:aria-selected="selectedFilterTab === 'allPosts'"
      x-bind:tabindex="selectedFilterTab === 'allPosts' ? '0' : '-1'"
      x-bind:class="selectedFilterTab === 'allPosts' ? 'text-[var(--primary)] border-b-2 border-[var(--primary)]' : 'hover:border-b-2 hover:border-b-[var(--primary)] hover:text-[var(--primary)]'"
      class="group filter-btn active flex h-min cursor-pointer items-center gap-2 px-4 py-2 text-sm" type="div"
      role="tab" aria-controls="tabpanelallPosts">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path :class="selectedFilterTab === 'allPosts' ? 'fill-[var(--primary)]' : 'fill-[#737373]'"
          class="group-hover:fill-[var(--primary)]"
          d="M14.1338 7.73308V14.1333C14.1338 14.2748 14.0776 14.4104 13.9776 14.5105C13.8776 14.6105 13.7419 14.6667 13.6005 14.6667H9.86699C9.72554 14.6667 9.58988 14.6105 9.48985 14.5105C9.38983 14.4104 9.33364 14.2748 9.33364 14.1333V10.6665C9.33364 10.5958 9.30554 10.528 9.25553 10.478C9.20552 10.4279 9.13769 10.3998 9.06696 10.3998H6.4002C6.32947 10.3998 6.26164 10.4279 6.21163 10.478C6.16162 10.528 6.13352 10.5958 6.13352 10.6665V14.1333C6.13352 14.2748 6.07733 14.4104 5.97731 14.5105C5.87728 14.6105 5.74162 14.6667 5.60017 14.6667H1.8667C1.72524 14.6667 1.58958 14.6105 1.48956 14.5105C1.38954 14.4104 1.33334 14.2748 1.33334 14.1333V7.73308C1.33347 7.45022 1.44595 7.179 1.64602 6.97905L6.97955 1.64552C7.17958 1.44562 7.45079 1.33334 7.73358 1.33334C8.01637 1.33334 8.28758 1.44562 8.48761 1.64552L13.8211 6.97905C14.0212 7.179 14.1337 7.45022 14.1338 7.73308Z"
          fill="#737373" />
      </svg>

      All
    </div>
    <div x-on:click="selectedFilterTab = 'featuredPost'" data-filter="Featured"
      x-bind:aria-selected="selectedFilterTab === 'featuredPost'"
      x-bind:tabindex="selectedFilterTab === 'featuredPost' ? '0' : '-1'"
      x-bind:class="selectedFilterTab === 'featuredPost' ?  'text-[var(--primary)] border-b-2 border-[var(--primary)]' : 'hover:border-b-2 hover:border-b-[var(--primary)] hover:text-[var(--primary)]'"
      class="group flex h-min filter-btn cursor-pointer items-center gap-2 px-4 py-2 text-sm" type="div" role="tab"
      aria-controls="tabpanelfeaturedPost">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path :class="selectedFilterTab === 'featuredPost' ? 'fill-[var(--primary)]' : 'fill-[#737373]'"
          class="group-hover:fill-[var(--primary)]"
          d="M13.2821 2.35897H11.7436V1.84615C11.7436 1.71014 11.6896 1.5797 11.5934 1.48353C11.4972 1.38736 11.3668 1.33333 11.2308 1.33333C11.0948 1.33333 10.9643 1.38736 10.8682 1.48353C10.772 1.5797 10.7179 1.71014 10.7179 1.84615V2.35897H5.58974V1.84615C5.58974 1.71014 5.53571 1.5797 5.43954 1.48353C5.34337 1.38736 5.21293 1.33333 5.07692 1.33333C4.94091 1.33333 4.81048 1.38736 4.7143 1.48353C4.61813 1.5797 4.5641 1.71014 4.5641 1.84615V2.35897H3.02564C2.75362 2.35897 2.49275 2.46703 2.3004 2.65937C2.10806 2.85172 2 3.11259 2 3.38461V13.641C2 13.913 2.10806 14.1739 2.3004 14.3663C2.49275 14.5586 2.75362 14.6667 3.02564 14.6667H13.2821C13.5541 14.6667 13.8149 14.5586 14.0073 14.3663C14.1996 14.1739 14.3077 13.913 14.3077 13.641V3.38461C14.3077 3.11259 14.1996 2.85172 14.0073 2.65937C13.8149 2.46703 13.5541 2.35897 13.2821 2.35897ZM4.5641 4.41025V3.89743C4.5641 3.76142 4.61813 3.63098 4.7143 3.53481C4.81048 3.43864 4.94091 3.38461 5.07692 3.38461C5.21293 3.38461 5.34337 3.43864 5.43954 3.53481C5.53571 3.63098 5.58974 3.76142 5.58974 3.89743V4.41025C5.58974 4.54626 5.53571 4.6767 5.43954 4.77287C5.34337 4.86904 5.21293 4.92307 5.07692 4.92307C4.94091 4.92307 4.81048 4.86904 4.7143 4.77287C4.61813 4.6767 4.5641 4.54626 4.5641 4.41025ZM11.3942 8.30128L9.82628 9.59551L10.3045 11.5256C10.3167 11.5746 10.3141 11.6262 10.2971 11.6737C10.2801 11.7213 10.2494 11.7627 10.209 11.7929C10.1646 11.8257 10.1109 11.8434 10.0558 11.8436C10.0107 11.8433 9.96646 11.8311 9.92756 11.8083L8.15385 10.7679L6.38205 11.8109C6.33834 11.8368 6.28791 11.8491 6.23718 11.8463C6.18644 11.8435 6.13768 11.8257 6.09709 11.7951C6.0565 11.7646 6.0259 11.7226 6.00919 11.6747C5.99247 11.6267 5.99039 11.5748 6.00321 11.5256L6.48141 9.59294L4.91346 8.30128C4.87388 8.26877 4.84494 8.22516 4.83037 8.17605C4.81581 8.12695 4.81628 8.07461 4.83173 8.02578C4.84718 7.97695 4.8769 7.93386 4.91706 7.90207C4.95722 7.87029 5.00598 7.85125 5.05705 7.84743L7.12372 7.68781L7.91859 5.84743C7.93848 5.80156 7.97134 5.7625 8.01314 5.73506C8.05494 5.70762 8.10385 5.693 8.15385 5.693C8.20385 5.693 8.25275 5.70762 8.29455 5.73506C8.33635 5.7625 8.36922 5.80156 8.3891 5.84743L9.18398 7.68781L11.2506 7.84743C11.3017 7.85125 11.3505 7.87029 11.3906 7.90207C11.4308 7.93386 11.4605 7.97695 11.476 8.02578C11.4914 8.07461 11.4919 8.12695 11.4773 8.17605C11.4628 8.22516 11.4338 8.26877 11.3942 8.30128ZM11.7436 4.41025C11.7436 4.54626 11.6896 4.6767 11.5934 4.77287C11.4972 4.86904 11.3668 4.92307 11.2308 4.92307C11.0948 4.92307 10.9643 4.86904 10.8682 4.77287C10.772 4.6767 10.7179 4.54626 10.7179 4.41025V3.89743C10.7179 3.76142 10.772 3.63098 10.8682 3.53481C10.9643 3.43864 11.0948 3.38461 11.2308 3.38461C11.3668 3.38461 11.4972 3.43864 11.5934 3.53481C11.6896 3.63098 11.7436 3.76142 11.7436 3.89743V4.41025Z"
          fill="#737373" />
      </svg>
      Featured
    </div>
    <div x-on:click="selectedFilterTab = 'MyPosts'" data-filter="My Posts"
      x-bind:aria-selected="selectedFilterTab === 'MyPosts'"
      x-bind:tabindex="selectedFilterTab === 'MyPosts' ? '0' : '-1'"
      x-bind:class="selectedFilterTab === 'MyPosts' ?  'text-[var(--primary)] border-b-2 border-[var(--primary)]' : 'hover:border-b-2 hover:border-b-[var(--primary)] hover:text-[var(--primary)]'"
      class="group flex h-min filter-btn cursor-pointer items-center gap-2 px-4 py-2 text-sm" type="div" role="tab"
      aria-controls="tabpanelMyPosts">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path :class="selectedFilterTab === 'MyPosts' ? 'fill-[var(--primary)]' : 'fill-[#737373]'"
          class="group-hover:fill-[var(--primary)]"
          d="M14.5983 13.8999C14.5533 13.9779 14.4885 14.0426 14.4106 14.0876C14.3326 14.1326 14.2441 14.1563 14.1541 14.1563H1.8457C1.75572 14.1562 1.66735 14.1324 1.58946 14.0874C1.51157 14.0423 1.4469 13.9776 1.40195 13.8997C1.357 13.8217 1.33335 13.7333 1.33337 13.6433C1.3334 13.5533 1.35709 13.465 1.40208 13.387C2.37842 11.6991 3.88299 10.4888 5.63885 9.91504C4.77032 9.398 4.09553 8.61015 3.7181 7.67248C3.34067 6.73481 3.28147 5.69917 3.5496 4.7246C3.81772 3.75004 4.39835 2.89042 5.20231 2.27778C6.00626 1.66514 6.9891 1.33334 7.99988 1.33334C9.01066 1.33334 9.9935 1.66514 10.7975 2.27778C11.6014 2.89042 12.182 3.75004 12.4502 4.7246C12.7183 5.69917 12.6591 6.73481 12.2817 7.67248C11.9042 8.61015 11.2294 9.398 10.3609 9.91504C12.1168 10.4888 13.6213 11.6991 14.5977 13.387C14.6428 13.4649 14.6666 13.5533 14.6667 13.6434C14.6668 13.7334 14.6432 13.8219 14.5983 13.8999Z"
          fill="#737373" />
      </svg>
      My Posts
    </div>
    <div x-on:click="selectedFilterTab = 'savedPosts'" data-filter="Saved Posts"
      x-bind:aria-selected="selectedFilterTab === 'savedPosts'"
      x-bind:tabindex="selectedFilterTab === 'savedPosts' ? '0' : '-1'"
      x-bind:class="selectedFilterTab === 'savedPosts' ? 'text-[var(--primary)] border-b-2 border-[var(--primary)]' : 'hover:border-b-2 hover:border-b-[var(--primary)] hover:text-[var(--primary)]'"
      class="group flex h-min filter-btn cursor-pointer hover:text-[var(--primary)] items-center gap-2 px-4 py-2 text-sm" type="div" role="tab"
      aria-controls="tabpanelsavedPosts">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path :class="selectedFilterTab === 'savedPosts' ? 'fill-[var(--primary)]' : 'fill-[#737373]'"
          class="group-hover:fill-[var(--primary)]"
          d="M11.8668 1.33334H4.4C4.1171 1.33334 3.84578 1.44572 3.64574 1.64576C3.4457 1.8458 3.33331 2.11712 3.33331 2.40002V14.1336C3.33336 14.2288 3.35888 14.3222 3.40722 14.4042C3.45556 14.4862 3.52496 14.5538 3.60822 14.5999C3.69149 14.646 3.78557 14.669 3.88072 14.6665C3.97587 14.664 4.06862 14.636 4.14933 14.5856L8.13341 12.0955L12.1182 14.5856C12.1989 14.6359 12.2915 14.6637 12.3866 14.6661C12.4816 14.6685 12.5756 14.6455 12.6588 14.5994C12.7419 14.5533 12.8112 14.4858 12.8595 14.4039C12.9078 14.322 12.9334 14.2287 12.9335 14.1336V2.40002C12.9335 2.11712 12.8211 1.8458 12.6211 1.64576C12.421 1.44572 12.1497 1.33334 11.8668 1.33334Z"
          fill="#737373" />
      </svg>
      Saved Posts
    </div>
    <div x-on:click="selectedFilterTab = 'scheduledPost'" data-filter="scheduledPost"
      x-bind:aria-selected="selectedFilterTab === 'scheduledPost'"
      x-bind:tabindex="selectedFilterTab === 'scheduledPost' ? '0' : '-1'"
      x-bind:class="selectedFilterTab === 'scheduledPost' ?  'text-[var(--primary)] border-b-2 border-[var(--primary)]' : 'hover:border-b-2 hover:border-b-[var(--primary)] hover:text-[var(--primary)]'"
      class="group tabsForAdmin filter-btn flex h-min cursor-pointer items-center gap-2 px-4 py-2 text-sm" type="div" role="tab"
      aria-controls="tabpanelscheduledPost">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path :class="selectedFilterTab === 'scheduledPost' ? 'fill-[var(--primary)]' : 'fill-[#737373]'" class="group-hover:fill-[var(--primary)]"
          d="M8 3C6.81331 3 5.65328 3.35189 4.66658 4.01118C3.67989 4.67047 2.91085 5.60754 2.45673 6.7039C2.0026 7.80026 1.88378 9.00666 2.11529 10.1705C2.3468 11.3344 2.91825 12.4035 3.75736 13.2426C4.59648 14.0818 5.66558 14.6532 6.82946 14.8847C7.99335 15.1162 9.19975 14.9974 10.2961 14.5433C11.3925 14.0892 12.3295 13.3201 12.9888 12.3334C13.6481 11.3467 14 10.1867 14 9C13.9982 7.40926 13.3655 5.88419 12.2406 4.75937C11.1158 3.63454 9.59074 3.00182 8 3ZM10.8538 6.85375L8.35375 9.35375C8.3073 9.40021 8.25215 9.43705 8.19145 9.4622C8.13075 9.48734 8.0657 9.50028 8 9.50028C7.93431 9.50028 7.86925 9.48734 7.80855 9.4622C7.74786 9.43705 7.69271 9.40021 7.64625 9.35375C7.5998 9.30729 7.56295 9.25214 7.53781 9.19145C7.51266 9.13075 7.49972 9.0657 7.49972 9C7.49972 8.9343 7.51266 8.86925 7.53781 8.80855C7.56295 8.74786 7.5998 8.6927 7.64625 8.64625L10.1463 6.14625C10.1927 6.09979 10.2479 6.06294 10.3086 6.0378C10.3693 6.01266 10.4343 5.99972 10.5 5.99972C10.5657 5.99972 10.6308 6.01266 10.6915 6.0378C10.7521 6.06294 10.8073 6.09979 10.8538 6.14625C10.9002 6.1927 10.9371 6.24786 10.9622 6.30855C10.9873 6.36925 11.0003 6.4343 11.0003 6.5C11.0003 6.5657 10.9873 6.63075 10.9622 6.69145C10.9371 6.75214 10.9002 6.8073 10.8538 6.85375ZM6 1.5C6 1.36739 6.05268 1.24021 6.14645 1.14645C6.24022 1.05268 6.36739 1 6.5 1H9.5C9.63261 1 9.75979 1.05268 9.85356 1.14645C9.94732 1.24021 10 1.36739 10 1.5C10 1.63261 9.94732 1.75979 9.85356 1.85355C9.75979 1.94732 9.63261 2 9.5 2H6.5C6.36739 2 6.24022 1.94732 6.14645 1.85355C6.05268 1.75979 6 1.63261 6 1.5Z"
          fill="#737373" />
      </svg>
      Scheduled
    </div>

  </div>
</div>
    <div
      id="create-post-modal"
      class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50"
    >
      <div
        class="bg-white p-4 rounded shadow-lg w-[90%] max-w-lg relative createPostMainModal"
      >
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-bold">Create a Post</h2>
          <button id="close-post-modal">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div id="post-creation-form" class="post-form">
          <div class="toolbar">
            <button data-cmd="bold"><b>B</b></button>
            <button data-cmd="italic"><i>I</i></button>
            <button data-cmd="underline"><u>U</u></button>
            <button data-cmd="link"><i class="fa-solid fa-link"></i></button>
          </div>
          <div
            id="post-editor"
            class="editor min-h-[80px] resize-y p-2 rounded"
            contenteditable="true"
            data-placeholder="Write a post..."
          ></div>
          <div class="upload-section">
            <div class="flex item-center gap-4 my-4">
              <div class="emoji-wrapper relative">
                <button type="button" class="emoji-toggle">😊</button>
                <div
                  class="emoji-picker hidden absolute bg-white border rounded shadow-md p-1 mt-1 z-10"
                >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >😀</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >😂</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >😍</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >👍</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >👎</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >🤔</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >😢</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >🎉</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >🚀</span
                  >
                  <span class="cursor-pointer px-1 hover:bg-[var(--primary)]"
                    >🥳</span
                  >
                </div>
              </div>
              <button id="recordBtn" class="recordBtn">
                <i class="fa-solid fa-microphone"></i> Start Recording
              </button>
              <div
                x-data="{ openScheduleDatePicker: false, selectedDate: '', today: new Date().toISOString().split('T')[0] }"
                class="relative inline-block text-left hidden"
                id="adminSchedulePostButton"
              >
                <!-- Trigger Button -->
                <span id="scheduledDateContainer" class="hidden"></span>
                <button
                  @click="openScheduleDatePicker = !openScheduleDatePicker"
                  class="px-4 py-2 bg-[var(--primary)] text-white rounded hover:bg-blue-700"
                >
                  Pick a Date
                </button>

                <!-- Dropdown -->
                <div
                  x-show="openScheduleDatePicker"
                  @click.outside="openScheduleDatePicker = false"
                  class="absolute mt-2 w-64 bg-white shadow-lg rounded border p-4 z-50"
                  x-transition
                >
                  <label
                    for="datePicker"
                    class="block text-sm text-gray-700 mb-2"
                    >Select a date:</label
                  >

                  <!-- Native Date Picker -->
                  <input
                    type="datetime-local"
                    id="datePicker"
                    x-model="selectedDate"
                    :min="today"
                    class="w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300"
                  />

                  <!-- Display Selected -->
                  <p class="mt-3 text-sm text-gray-600" x-show="selectedDate">
                    Selected:
                    <span
                      class="font-medium text-gray-800"
                      x-text="selectedDate"
                    ></span>
                  </p>

                  <!-- Schedule Button -->
                  <button
                    @click="
                        const ts = new Date(selectedDate).getTime() / 1000;
                        document.getElementById('scheduledDateContainer').innerText = ts;
                        openScheduleDatePicker = false;
                        createForumToSubmit('0','Post','post-form');
                      "
                    class="mt-4 w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50"
                    :disabled="!selectedDate"
                  >
                    Schedule
                  </button>
                </div>
              </div>
            </div>
            <input
              type="file"
              id="file-input"
              class="file-input"
              style="display: none"
              accept="image/*,audio/*,video/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
            />
            <canvas
              class="canvasWaveform waveform w-full"
              id="waveform"
              width="450"
              height="100"
            ></canvas>
          </div>
        </div>
        <button
          id="submitForumPost"
          onclick="createForumToSubmit('0','Post','post-form');"
        >
          Post
        </button>
        <!-- <button class="ml-auto block" id="submit-post">Post</button> -->
      </div>
    </div>

    <div
      id="post-filters"
      class="bg-white post-filters w-full shadow-lg p-4 flex items-center flex-col my-4 rounded"
    >
      <div
        class="flex items-center justify-between w-full max-[500px]:flex-col max-[500px]:items-start max-[500px]:gap-4"
      >


        <div class="flex items-center gap-4">
          <div class="sort-filter relative">
            <button id="sort-filter-btn" class="filter-btn">Latest ▾</button>
            <ul
              id="sort-filter-menu"
              class="sort-filter-menu absolute top-[100%] right-0 bg-[#ffffff] border border-1-[#ccc] list-style-none p-0 mr-[4px] w-fit z-[10]"
            >
              <li class="py-2 px-8 cursor-pointer active" data-sort="Latest">
                Latest
              </li>
              <li class="py-2 px-8 cursor-pointer" data-sort="Oldest">
                Oldest
              </li>
              <li
                class="py-2 px-8 cursor-pointer text-nowrap"
                data-sort="Most Popular"
              >
                Most Popular
              </li>
            </ul>
          </div>
          <div class="file-filter relative">
            <button id="file-filter-btn" class="filter-btn">All ▾</button>
            <ul
              id="file-filter-menu"
              class="file-filter-menu absolute top-[100%] right-0 bg-[#ffffff] border border-1-[#ccc] list-style-none p-0 mr-[4px] min-w-[6em] z-[10]"
            >
              <li
                class="py-2 px-8 cursor-pointer"
                data-type="All"
                class="active"
              >
                All
              </li>
              <li class="py-2 px-8 cursor-pointer" data-type="Image">Image</li>
              <li class="py-2 px-8 cursor-pointer" data-type="Video">Video</li>
              <li class="py-2 px-8 cursor-pointer" data-type="Audio">Audio</li>
              <li class="py-2 px-8 cursor-pointer" data-type="File">File</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="search-wrapper w-full my-4 relative">
        <input
          type="text"
          id="searchPost"
          class="py-2 px-4 rounded text-sm w-full"
          placeholder="Search by author or text…"
          autocomplete="off"
        />
        <span
          class="clearIcon hidden absolute top-[50%] right-[8px] cursor-pointer text-sm translate-y-[-50%]"
          ><i class="fa-solid fa-xmark"></i
        ></span>
        <span
          class="searchIcon absolute top-[50%] right-[8px] cursor-pointer text-sm translate-y-[-50%]"
          ><i class="fa-solid fa-search"></i
        ></span>
      </div>
    </div>

    <div class="tabs mb-4 hidden" id="tabsForAdmin">
      <button id="publishedTab" class="px-4 py-2 bg-[var(--primary)] text-white mr-2">
        Published
      </button>
      <button class="px-4 py-2 bg-gray-300 text-black">
        Scheduled
      </button>
    </div>

    <div id="skeleton-loader" class="w-full">
      <div class="skeleton-item flex gap-4 p-4 mb-4 bg-white rounded shadow">
        <div class="skeleton-avatar"></div>
        <div class="flex-1 flex flex-col gap-2">
          <div class="skeleton-line short"></div>
          <div class="skeleton-line"></div>
          <div class="skeleton-line medium"></div>
        </div>
      </div>
      <div class="skeleton-item flex gap-4 p-4 mb-4 bg-white rounded shadow">
        <div class="skeleton-avatar"></div>
        <div class="flex-1 flex flex-col gap-2">
          <div class="skeleton-line short"></div>
          <div class="skeleton-line"></div>
          <div class="skeleton-line medium"></div>
        </div>
      </div>
      <div class="skeleton-item flex gap-4 p-4 mb-4 bg-white rounded shadow">
        <div class="skeleton-avatar"></div>
        <div class="flex-1 flex flex-col gap-2">
          <div class="skeleton-line short"></div>
          <div class="skeleton-line"></div>
          <div class="skeleton-line medium"></div>
        </div>
      </div>
    </div>

    <div id="forum-root" class="w-full"></div>

    <!-- Delete confirmation modal -->
    <div
      id="delete-modal"
      class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50"
    >
      <div class="bg-white p-4 rounded shadow-lg w-[90%] max-w-sm">
        <h2 id="delete-modal-title" class="text-lg mb-4"></h2>
        <div class="flex justify-end gap-2">
          <button
            id="delete-confirm"
            class="bg-red-500 text-white px-4 py-1 rounded"
          >
            Delete
          </button>
          <button id="delete-cancel" class="bg-gray-300 px-4 py-1 rounded">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <script id="tmpl-item" type="text/x-jsrender">
           {{if (forumType === 'Post' || forumType === 'Reply' || forumType === 'Comment') && (forumStatus === 'Published - Not flagged' || (forumStatus === 'Scheduled' && isAdmin))}}
             <div
               class="item rounded bg-white shadow-xl flex flex-col gap-2 my-4 p-4 relative border-2 border-[#e9ebee] "
               data-uid="{{:uid}}"
               data-depth="{{:depth}}"
               data-forumStatus="{{:forumStatus}}"
              
               >
               <div class="flex items-start justify-between">
               <div class="author flex items-center mb-2">
                 <img class="avatar w-[40px] h-[40px] bg-[#ccc] rounded-full mr-[12px]"
                     src="{{:authorImage}}"
                     alt="{{:authorName}}"
                     onerror="this.onerror=null;this.src='https://files.ontraport.com/media/b0456fe87439430680b173369cc54cea.php03bzcx?Expires=4895186056&Signature=fw-mkSjms67rj5eIsiDF9QfHb4EAe29jfz~yn3XT0--8jLdK4OGkxWBZR9YHSh26ZAp5EHj~6g5CUUncgjztHHKU9c9ymvZYfSbPO9JGht~ZJnr2Gwmp6vsvIpYvE1pEywTeoigeyClFm1dHrS7VakQk9uYac4Sw0suU4MpRGYQPFB6w3HUw-eO5TvaOLabtuSlgdyGRie6Ve0R7kzU76uXDvlhhWGMZ7alNCTdS7txSgUOT8oL9pJP832UsasK4~M~Na0ku1oY-8a7GcvvVv6j7yE0V0COB9OP0FbC8z7eSdZ8r7avFK~f9Wl0SEfS6MkPQR2YwWjr55bbJJhZnZA__&Key-Pair-Id=APKAJVAAMVW6XQYWSTNA';">
                 <div class="info flex items-center gap-2">
                   <span class="name font-bold">{{:authorName}}</span>
                   <span class="timestamp text-sm text-[#65676b] ml-2">{{:timeAgo}}</span>
                   {{if isFeatured}}
                   <i class="fa-solid fa-star text-yellow-500 ml-2" title="Featured"></i>
                   {{/if}}
                   {{if forumStatus==='Scheduled'}}
                <div class="flex items-center gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                 <path d="M9 20H6C4.93913 20 3.92172 19.5786 3.17157 18.8284C2.42143 18.0783 2 17.0609 2 16V7C2 5.93913 2.42143 4.92172 3.17157 4.17157C3.92172 3.42143 4.93913 3 6 3H17C18.0609 3 19.0783 3.42143 19.8284 4.17157C20.5786 4.92172 21 5.93913 21 7V10M8 2V4M15 2V4M2 8H21M18.5 15.643L17 17.143" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                 <path d="M17 22C19.7614 22 22 19.7614 22 17C22 14.2386 19.7614 12 17 12C14.2386 12 12 14.2386 12 17C12 19.7614 14.2386 22 17 22Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
               </svg>
                   <div class="text-sm text-[#65676b]">{{:~formatDate(sheduledDate)}}</div>
                </div>
                   {{/if}}
                 </div>
               </div>
               {{if canDelete}}
                  <div x-data="{ threeDotsForAdmin: false, openedWithKeyboard: false }" class="relative w-fit" x-on:keydown.esc.window="threeDotsForAdmin = false, openedWithKeyboard = false">
             <!-- Toggle Button -->
             <div x-on:click="threeDotsForAdmin = ! threeDotsForAdmin" aria-haspopup="true" x-on:keydown.space.prevent="openedWithKeyboard = true" x-on:keydown.enter.prevent="openedWithKeyboard = true" class="cursor-pointer" x-on:keydown.down.prevent="openedWithKeyboard = true">
               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                 <path d="M13 12C13 12.2967 12.912 12.5867 12.7472 12.8334C12.5824 13.08 12.3481 13.2723 12.074 13.3858C11.7999 13.4993 11.4983 13.5291 11.2074 13.4712C10.9164 13.4133 10.6491 13.2704 10.4393 13.0607C10.2296 12.8509 10.0867 12.5836 10.0288 12.2926C9.97094 12.0017 10.0006 11.7001 10.1142 11.426C10.2277 11.1519 10.42 10.9176 10.6666 10.7528C10.9133 10.588 11.2033 10.5 11.5 10.5C11.8978 10.5 12.2794 10.658 12.5607 10.9393C12.842 11.2206 13 11.6022 13 12ZM11.5 5C11.7967 5 12.0867 4.91203 12.3334 4.74721C12.58 4.58238 12.7723 4.34811 12.8858 4.07403C12.9994 3.79994 13.0291 3.49834 12.9712 3.20737C12.9133 2.91639 12.7704 2.64912 12.5607 2.43934C12.3509 2.22956 12.0836 2.0867 11.7926 2.02882C11.5017 1.97094 11.2001 2.00065 10.926 2.11418C10.6519 2.22771 10.4176 2.41997 10.2528 2.66665C10.088 2.91332 10 3.20333 10 3.5C10 3.89783 10.158 4.27936 10.4393 4.56066C10.7206 4.84197 11.1022 5 11.5 5ZM11.5 19C11.2033 19 10.9133 19.088 10.6666 19.2528C10.42 19.4176 10.2277 19.6519 10.1142 19.926C10.0006 20.2001 9.97094 20.5017 10.0288 20.7926C10.0867 21.0836 10.2296 21.3509 10.4393 21.5607C10.6491 21.7704 10.9164 21.9133 11.2074 21.9712C11.4983 22.0291 11.7999 21.9993 12.074 21.8858C12.3481 21.7723 12.5824 21.58 12.7472 21.3334C12.912 21.0867 13 20.7967 13 20.5C13 20.1022 12.842 19.7206 12.5607 19.4393C12.2794 19.158 11.8978 19 11.5 19Z" fill="black" />
               </svg>
             </div>
         <!-- Dropdown Menu -->
         <div x-cloak x-show="threeDotsForAdmin || openedWithKeyboard" x-transition x-trap="openedWithKeyboard" x-on:click.outside="threeDotsForAdmin = false, openedWithKeyboard = false" x-on:keydown.down.prevent="$focus.wrap().next()" x-on:keydown.up.prevent="$focus.wrap().previous()" class="absolute top-11 left-0 flex w-fit min-w-48 flex-col overflow-hidden bg-white shadow-lg z-[999]" role="menu">
           {{if depth === 0}}
             {{if isAdmin}}

             <div data-uid="{{:uid}}" class="btn-delete cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Delete this post</div>
             {{if forumStatus === 'Published - Not flagged'}}
                 {{if !isFeatured}}
                 <div data-uid="{{:uid}}" class="btn-feature cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Mark this post as featured</div>
                 {{else}}
                 <div data-uid="{{:uid}}" class="btn-unfeature cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Remove featured mark</div>
                 {{/if}}
                 {{if commentsDisabled}}
                 <div data-uid="{{:uid}}" class="btn-enable-comments cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Enable comments on this post</div>
                 {{else}}
                 <div data-uid="{{:uid}}" class="btn-disable-comments cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Disable comments on this post</div>
                 {{/if}}
             {{else}}
               <div data-uid="{{:uid}}" class="postNowFromScheduled cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Post Now</div>
             {{/if}}
             {{else}}
             {{if canDelete}}
             <div data-uid="{{:uid}}" class="btn-delete cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">Delete this post</div>
             {{/if}}
             {{/if}}
           {{else}}
           {{if canDelete}}
             <div data-uid="{{:uid}}" class="btn-delete cursor-pointer px-4 py-2 text-nowrap text-black transition-all hover:bg-[var(--primary)]" role="menuitem">
               {{if depth === 1}}Delete this comment{{else}}Delete this reply{{/if}}
             </div>
           {{/if}}
           {{/if}}
         </div>
       </div>
       {{/if}}

       </div>
      <div class="content my-2">{{:content}}</div>
         <div class="file-preview">

             {{if fileContent}}
                 {{if fileContent}}
                   {{if fileType === "Image"}}
                     <img src="{{:fileContent}}" style="width:100%;height:300px;object-fit:cover;" alt="preview" />
                   {{else fileType === "Audio"}}
                     <audio class="js-player" controls>
                       <source src="{{:fileContent}}" type="audio/mpeg" />
                       Your browser does not support the audio tag.
                     </audio>
                   {{else fileType === "Video"}}
                     <video class="js-player" controls style="width: 100%; height: auto;">
                       <source src="{{:fileContent}}" type="video/mp4" />
                       Your browser does not support video.
                     </video>
                   {{else}}
                     <a href="{{:fileContent}}" target="_blank" class="line-clamp-1 cursor-pointer text-[var(--primary)] hover:underline">{{:fileContentName}}</a>
                   {{/if}}
                 {{/if}}
           {{/if}}
           {{if depth > 0}}
           {{if fileContentComment}}
                 {{if fileContentComment}}
                   {{if fileType === "Image"}}
                     <img src="{{:fileContentComment || fileContentComment}}" style="width:100%;height:300px;object-fit:cover;" alt="preview" />
                   {{else fileType === "Audio"}}
                     <audio class="js-player" controls>
                       <source src="{{:fileContentComment}}" type="audio/mpeg" />
                       Your browser does not support the audio tag.
                     </audio>
                   {{else fileType === "Video"}}
                     <video class="js-player" controls style="width: 100%; height: auto;">
                       <source src="{{:fileContentComment}}" type="video/mp4" />
                       Your browser does not support video.
                     </video>
                   {{else}}
                     <div>{{:fileContentCommentName}}</div>
                   {{/if}}
                 {{/if}}
               {{/if}}
         {{/if}}

         </div>
       {{if forumStatus === 'Published - Not flagged'}}
               <div class="actions">
                 <div class = "flex items-center justify-between">
                   <div class = "flex items-center gap-4">
                     <button class="btn-like{{:hasUpvoted ? ' liked' : ''}} flex items-center" data-uid="{{:uid}}"><i class="fa-solid fa-thumbs-up"></i> <span class="ml-1">{{:upvotes}}</span></button>
                     {{if !commentsDisabled && forumStatus !== 'Scheduled'}}
                     <button class="btn-comment flex items-center" data-uid="{{:uid}}"><i class="fa-solid fa-comment"></i></button>
                     {{/if}}
                   </div>
                   {{if depth === 0}}
                     <button class="btn-bookmark{{:hasBookmarked ? ' bookmarked' : ''}} flex items-center" data-uid="{{:uid}}"><i class="fa-solid fa-bookmark"></i></button>
                   {{/if}}
                 </div>
               </div>
       {{/if}}
               {{if depth === 0 && forumStatus !== 'Scheduled'}}
               <div class="ribbon w-full my-4 py-2 bg-[#e9ebee] text-center cursor-pointer text-sm hover:bg-[#007bff] hover:text-white" data-uid="{{:uid}}">
         {{:~totalComments(children)}} {{:~totalComments(children) === 1 ? 'Comment' : 'Comments'}}
       </div>

               {{else depth === 1}}
               <div class="ribbon w-full my-4 py-2 bg-[#e9ebee] text-center cursor-pointer text-sm hover:bg-[#007bff] hover:text-white" data-uid="{{:uid}}">
                   {{:children.length}} {{:children.length === 1 ? 'Reply' : 'Replies'}}
               </div>
               {{/if}}
               {{if children.length && !isCollapsed}}
                 <div class="children visible my-4 {{:depth < 2 ? 'pl-8 ml-[12px] border-l border-2-[#e9ebee]' : ''}}">
                   {{for children}}
                     {{include tmpl="#tmpl-item"/}}
                   {{/for}}
                 </div>
               {{/if}}
             </div>
             {{/if}}
    </script>

    <script src="https://unpkg.com/mic-recorder-to-mp3@2.2.1/dist/index.min.js"></script>

    <script type="module" src="../src/main.js"></script>

    <div id="toast-container" class="toast-container"></div>

    <div
      id="file-preview-modal"
      class="hidden fixed inset-0 bg-black/75 flex items-center justify-center z-[99]"
    >
      <div
        class="modal-content bg-white p-4 m-4 rounded relative max-w-full max-h-full"
      >
        <div id="preview-container" class="max-h-[80vh] overflow-auto"></div>
      </div>
      <a
        id="download-preview"
        href="#"
        download
        class="absolute top-2 left-2 cursor-pointer"
      >
        <i class="fa-solid fa-download text-white text-2xl"></i>
      </a>
      <div
        id="close-file-preview"
        class="absolute top-2 cursor-pointer right-2 !p-0"
      >
        <i class="fa-solid fa-xmark text-white text-2xl"></i>
      </div>
    </div>
  </body>
</html>
